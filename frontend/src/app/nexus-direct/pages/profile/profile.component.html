<div class="scrollable-wrapper">
<div class="profile-container">
  <div class="profile-header">
    <h1>My Profile</h1>
    <button *ngIf="!editing && !loading" (click)="toggleEdit()" class="btn-edit">
      ‚úèÔ∏è Edit Profile
    </button>
  </div>

  <!-- Error Message -->
  <div *ngIf="error" class="error-message">
    {{ error }}
  </div>

  <!-- Success Message -->
  <div *ngIf="success" class="success-message">
    {{ success }}
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="loading-state">
    <div class="spinner"></div>
    <p>Loading profile...</p>
  </div>

  <!-- Profile Content -->
  <div *ngIf="patient && !loading" class="profile-content">
    <form *ngIf="editing" [formGroup]="profileForm" (ngSubmit)="onSubmit()" class="profile-form">
      <!-- Name -->
      <div class="form-group">
        <label for="name">Full Name</label>
        <input
          type="text"
          id="name"
          formControlName="name"
          class="form-control"
          [class.is-invalid]="submitted && f['name'].errors"
        />
        <div *ngIf="submitted && f['name'].errors" class="error-text">
          <div *ngIf="f['name'].errors['required']">Name is required</div>
          <div *ngIf="f['name'].errors['minlength']">Name must be at least 2 characters</div>
        </div>
      </div>

      <!-- Age -->
      <div class="form-group">
        <label for="age">Age</label>
        <input
          type="number"
          id="age"
          formControlName="age"
          class="form-control"
        />
      </div>

      <!-- Gender -->
      <div class="form-group">
        <label for="gender">Gender</label>
        <select id="gender" formControlName="gender" class="form-control">
          <option value="">Select Gender</option>
          <option value="MALE">Male</option>
          <option value="FEMALE">Female</option>
          <option value="OTHER">Other</option>
        </select>
      </div>

      <!-- Phone -->
      <div class="form-group">
        <label for="phoneNumber">Phone Number</label>
        <input
          type="tel"
          id="phoneNumber"
          formControlName="phoneNumber"
          class="form-control"
          placeholder="+1 (555) 123-4567"
        />
      </div>

      <!-- Address -->
      <div class="form-group">
        <label for="address">Address</label>
        <input
          type="text"
          id="address"
          formControlName="address"
          class="form-control"
          placeholder="123 Main St, City, State, ZIP"
        />
      </div>

      <!-- Emergency Contact -->
      <div class="form-group">
        <label for="emergencyContact">Emergency Contact</label>
        <input
          type="text"
          id="emergencyContact"
          formControlName="emergencyContact"
          class="form-control"
          placeholder="Contact name and phone"
        />
      </div>

      <!-- Medical History -->
      <div class="form-group">
        <label for="medicalHistory">Medical History</label>
        <textarea
          id="medicalHistory"
          formControlName="medicalHistory"
          class="form-control"
          rows="4"
          placeholder="Any previous medical conditions, surgeries, etc."
        ></textarea>
      </div>

      <!-- Allergies -->
      <div class="form-group">
        <label for="allergies">Allergies</label>
        <textarea
          id="allergies"
          formControlName="allergies"
          class="form-control"
          rows="3"
          placeholder="List any allergies (medications, foods, etc.)"
        ></textarea>
      </div>

      <!-- Form Buttons -->
      <div class="form-actions">
        <button type="submit" class="btn-primary">üíæ Save Changes</button>
        <button type="button" (click)="toggleEdit()" class="btn-secondary">‚ùå Cancel</button>
      </div>
    </form>

    <!-- View Mode -->
    <div *ngIf="!editing" class="profile-view">
      <div class="profile-section">
        <h2>Personal Information</h2>
        <div class="info-grid">
          <div class="info-item">
            <label>Full Name</label>
            <p>{{ patient?.name }}</p>
          </div>
          <div class="info-item">
            <label>Age</label>
            <p>{{ patient?.age || 'Not provided' }}</p>
          </div>
          <div class="info-item">
            <label>Gender</label>
            <p>{{ patient?.gender || 'Not provided' }}</p>
          </div>
          <div class="info-item">
            <label>Phone Number</label>
            <p>{{ patient?.phoneNumber || 'Not provided' }}</p>
          </div>
        </div>
      </div>

      <div class="profile-section">
        <h2>Address Information</h2>
        <div class="info-item">
          <label>Address</label>
          <p>{{ patient?.address || 'Not provided' }}</p>
        </div>
        <div class="info-item">
          <label>Emergency Contact</label>
          <p>{{ patient?.emergencyContact || 'Not provided' }}</p>
        </div>
      </div>

      <div class="profile-section">
        <h2>Medical Information</h2>
        <div class="info-item">
          <label>Medical History</label>
          <p>{{ patient?.medicalHistory || 'Not provided' }}</p>
        </div>
        <div class="info-item">
          <label>Allergies</label>
          <p>{{ patient?.allergies || 'No known allergies' }}</p>
        </div>
      </div>
    </div>
  </div>
</div>
</div>
